# 開発方針（TDD）

このリポジトリでは **TDD（Test-Driven Development）** を基本方針とします。

## 基本フロー

1. Plan（やりたいことを整理）
2. Issue 作成（要件・受け入れ条件を明文化）
3. **テスト作成（Red）**
   - まず失敗するテストを書く
4. 実装（Green）
   - テストが通る最小実装
5. リファクタ（Refactor）
   - 可読性・設計改善（テストは常に通る状態）
6. PR 作成（Issue に紐づける）
   - PR本文に `Closes #<issue>` を入れる

## ルール

- **main への直pushは禁止**（必ずブランチ→PR→レビュー）
- PR/Issue のタイトル・説明は **日本語**
- まず Issue を作ってから開発を始める
- PR本文は `--body-file` を使って作成する（CLI引数に長文を直書きしない）

## テスト方針

- `npm test` で自動テストが実行できること
- テストしやすいように、純関数を `src/` に切り出す
  - 例: トークン認証の判定、コマンド出力のパースなど
- 外部依存（`/proc/stat` や `df` 実行）の部分は「パース関数」「計算関数」を分離してユニットテストを作る

## 例外

緊急対応などで TDD が難しい場合でも、後続PRでテストを追いつかせます（理由をIssue/PRに明記）。
